<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <title>@ViewData["Title"] - Web bán mật ong</title>

    <!-- Bootstrap core CSS -->
    <link href="~/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="~/assets/css/fontawesome.css">
    <link rel="stylesheet" href="~/assets/css/templatemo-villa-agency.css">
    <link rel="stylesheet" href="~/assets/css/owl.css">
    <link rel="stylesheet" href="~/assets/css/animate.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="~/css/site.css" />
</head>

<body>

  <!-- ***** Preloader Start ***** -->
  <div id="js-preloader" class="js-preloader">
    <div class="preloader-inner">
      <span class="dot"></span>
      <div class="dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
  <!-- ***** Preloader End ***** -->

  <div class="sub-header">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-8">
          <ul class="info">
            <li><i class="fa fa-envelope"></i> info@company.com</li>
            <li><i class="fa fa-map"></i> Sunny Isles Beach, FL 33160</li>
          </ul>
        </div>
        <div class="col-lg-4 col-md-4">
          <ul class="social-links">
            <li><a href="#"><i class="fab fa-facebook"></i></a></li>
            <li><a href="https://x.com/minthu" target="_blank"><i class="fab fa-twitter"></i></a></li>
            <li><a href="#"><i class="fab fa-linkedin"></i></a></li>
            <li><a href="#"><i class="fab fa-instagram"></i></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- ***** Header Area Start ***** -->
  <header class="header-area header-sticky">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="main-nav">
                    <!-- ***** Logo Start ***** -->
                    <a asp-controller="Home" asp-action="Index" class="logo">
                        <h1 style="white-space: nowrap; line-height: 1.2;">Mật Ong</h1>
                    </a>
                    <!-- ***** Logo End ***** -->
                    <!-- ***** Menu Start ***** -->
                    <ul class="nav">
                      <li><a asp-controller="Home" asp-action="Index" class="@(ViewContext.RouteData.Values["Action"]?.ToString() == "Index" ? "active" : "")">Trang chủ</a></li>
                      <li><a asp-controller="Shop" asp-action="Index" class="@(ViewContext.RouteData.Values["Controller"]?.ToString() == "Shop" ? "active" : "")">Sản phẩm</a></li>
                      <li><a asp-controller="Home" asp-action="Contact" class="@(ViewContext.RouteData.Values["Action"]?.ToString() == "Contact" ? "active" : "")">Liên hệ</a></li>
                      <li>
                          <a asp-controller="Cart" asp-action="Index" id="cart-link">
                              <i class="fa fa-shopping-cart"></i> Giỏ hàng 
                              <span class="badge bg-danger" id="cart-badge" style="display: none;">0</span>
                          </a>
                      </li>
                      @{
                          var userId = Context.Session.GetString("UserId");
                          var username = Context.Session.GetString("Username");
                          var fullName = Context.Session.GetString("FullName");
                          var role = Context.Session.GetString("Role");
                      }
                      @if (!string.IsNullOrEmpty(userId))
                      {
                          <li>
                              <a asp-controller="Account" asp-action="Profile">
                                  <i class="fa fa-user"></i> @(string.IsNullOrEmpty(fullName) ? username : fullName)
                                  @if (role == "ADMIN" || role == "Admin")
                                  {
                                      <span class="badge badge-danger" style="background-color: #dc3545; padding: 2px 6px; border-radius: 3px; font-size: 11px; margin-left: 5px;">Admin</span>
                                  }
                              </a>
                          </li>
                          @if (role == "ADMIN" || role == "Admin")
                          {
                              <li><a asp-controller="Admin" asp-action="Index"><i class="fa fa-dashboard"></i> Quản trị</a></li>
                          }
                          <li><a asp-controller="Account" asp-action="Logout"><i class="fa fa-sign-out"></i> Đăng xuất</a></li>
                      }
                      else
                      {
                          <li><a asp-controller="Account" asp-action="Login"><i class="fa fa-sign-in"></i> Đăng nhập</a></li>
                          <li><a asp-controller="Account" asp-action="Register"><i class="fa fa-user-plus"></i> Đăng ký</a></li>
                      }
                  </ul>   
                    <a class='menu-trigger'>
                        <span>Menu</span>
                    </a>
                    <!-- ***** Menu End ***** -->
                </nav>
                
            </div>
        </div>
    </div>
  </header>
  <!-- ***** Header Area End ***** -->

  <main>
    @RenderBody()
  </main>

  <footer class="honey-footer mt-5">
    <div class="container py-5">
      <div class="row gy-4">
        <!-- Cột 1: Logo + mô tả ngắn -->
        <div class="col-lg-4 col-md-6">
          <div class="honey-footer-logo mb-3">
            <h3 class="mb-0">Mật Ong</h3>
          </div>
          <p class="honey-footer-text mb-3">
            Mật ong thiên nhiên nguyên chất, được tuyển chọn kỹ lưỡng từ các vùng nguyên liệu sạch trên khắp Việt Nam.
          </p>
          <p class="honey-footer-text small mb-0">
            © 2025 Web bán mật ong. All rights reserved.
          </p>
        </div>

        <!-- Cột 2: Menu nhanh -->
        <div class="col-lg-4 col-md-6">
          <h5 class="honey-footer-title mb-3">Menu nhanh</h5>
          <ul class="list-unstyled honey-footer-links">
            <li><a asp-controller="Home" asp-action="Index">Trang chủ</a></li>
            <li><a asp-controller="Shop" asp-action="Index">Sản phẩm</a></li>
            <li><a asp-controller="Home" asp-action="Contact">Liên hệ</a></li>
            <li><a asp-controller="Home" asp-action="Index">Giới thiệu</a></li>
          </ul>
        </div>

        <!-- Cột 3: Thông tin liên hệ -->
        <div class="col-lg-4 col-md-12">
          <h5 class="honey-footer-title mb-3">Liên hệ</h5>
          <ul class="list-unstyled honey-footer-contact">
            <li>
              <i class="fa fa-map-marker-alt me-2"></i>
              <span>Sunny Isles Beach, FL 33160</span>
            </li>
            <li>
              <i class="fa fa-envelope me-2"></i>
              <span>info@matong.com</span>
            </li>
            <li>
              <i class="fa fa-phone me-2"></i>
              <span>0123 456 789</span>
            </li>
          </ul>
          <div class="honey-footer-social mt-3">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <!-- Bootstrap core JavaScript -->
  <script src="~/vendor/jquery/jquery.min.js"></script>
  <script src="~/vendor/bootstrap/js/bootstrap.min.js"></script>
  <script src="~/assets/js/isotope.min.js"></script>
  <script src="~/assets/js/owl-carousel.js"></script>
  <script src="~/assets/js/counter.js"></script>
  <script src="~/assets/js/custom.js"></script>
  
  @await RenderSectionAsync("Scripts", required: false)
  
  <script>
    // Hàm cập nhật số lượng giỏ hàng
    function updateCartCount() {
      fetch('/Cart/Count')
        .then(response => response.json())
        .then(data => {
          const badge = document.getElementById('cart-badge');
          if (badge) {
            if (data.count > 0) {
              badge.textContent = data.count;
              badge.style.display = 'inline';
            } else {
              badge.style.display = 'none';
            }
          }
        })
        .catch(error => console.error('Error updating cart count:', error));
    }
    
    // Cập nhật số lượng khi trang load
    document.addEventListener('DOMContentLoaded', function() {
      updateCartCount();
    });
  </script>
</body>
</html>
